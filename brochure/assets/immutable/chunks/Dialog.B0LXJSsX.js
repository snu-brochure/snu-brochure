import{d as F,c as Q,e as L,a as _,t as h}from"./disclose-version.CNizDa-z.js";import{p as I,$ as R,Y as s,Z as q,au as S,f as W,a as T,c as m,n as U,r as g,s as j,t as x,av as p}from"./index-client.-5ps3okq.js";import{i as D}from"./store.DruqF5eq.js";import{s as A,b as X,t as K}from"./index.DXcVvNa9.js";import{a as O}from"./actions.D4P5E7tX.js";import{p as b,b as $}from"./props.C0XUx_uW.js";function B(r){function e(i){r.contains(i.target)||r.dispatchEvent(new CustomEvent("clickoutside"))}return document.addEventListener("mouseup",e,{passive:!0}),{destroy(){document.removeEventListener("mouseup",e)}}}var ee=h('<button type="button" aria-label="Close" class="svelte-lgoc4l"></button>'),te=h('<div><div class="outer svelte-lgoc4l"><div class="inner svelte-lgoc4l"><div aria-modal="true" class="svelte-lgoc4l"><!></div></div></div> <!></div>');function re(r,e){I(e,!0);let i=b(e,"showModal",15),u=b(e,"closeButton",3,!1),k=b(e,"className",3,""),w=b(e,"disabled",11,!1);const C=255;let o=p(void 0),n=p(!1);function E(){var a,f,y,c;if(!i())return;const t=(a=s(o))==null?void 0:a.querySelector(".ck-body-wrapper");t&&((f=document.querySelector("body"))==null||f.append(t)),(y=s(o))==null||y.remove(),i(!1),(c=e.oncloseend)==null||c.call(e)}const l=()=>new Promise(t=>{var a;w()||((a=e.onclosestart)==null||a.call(e),q(n,!1),setTimeout(()=>{E(),t()},C*2))});async function v(){const t=document.querySelectorAll(".dialog-wrap.-opened");t.length>0&&t[t.length-1]===s(o)&&await(l==null?void 0:l())}async function P(t){t.target.querySelector(".ck-focused")||await v()}async function V(t){if(!s(n))return;const a=t.target;!a.closest(".dialog-root")&&(a.tagName==="DIV"&&a.classList.contains("objet-root")||a.tagName==="UL"&&a.classList.contains("sortable-root"))&&await v()}async function Y(t){s(n)&&t.key==="Escape"&&(t.preventDefault(),await v())}R(()=>{var t;s(o)&&i()&&((document.getElementById("app")??document.body).append(s(o)),setTimeout(()=>{q(n,!0)},10),(t=e.onopen)==null||t.call(e,{close:l}))});var M=Q();L("keyup",S,Y),L("click",S,V);var Z=W(M);{var z=t=>{var a=te(),f=m(a),y=m(f),c=m(y),G=m(c);A(G,()=>e.children??U,()=>({close:l})),g(c),O(c,d=>B==null?void 0:B(d)),g(y),g(f);var H=j(f,2);{var J=d=>{var N=ee();N.__click=l,_(d,N)};D(H,d=>{u()&&d(J)})}g(a),$(a,d=>q(o,d),()=>s(o)),x(()=>{X(a,`dialog-wrap ${k()??""} svelte-lgoc4l`),K(a,"-opened",s(n))}),L("clickoutside",c,P),_(t,a)};D(Z,t=>{i()&&t(z)})}_(r,M),T()}F(["click"]);var ae=h('<div class="close svelte-1y0fpw8"><button type="button" class="svelte-1y0fpw8">Close</button></div>'),oe=h('<div class="dialog-root svelte-1y0fpw8"><!> <!></div>');function ue(r,e){I(e,!0);let i=b(e,"inverted",3,!1);var u=oe(),k=m(u);{var w=o=>{var n=ae(),E=m(n);E.__click=function(...l){var v;(v=e.close)==null||v.apply(this,l)},g(n),_(o,n)};D(k,o=>{e.close&&o(w)})}var C=j(k,2);A(C,()=>e.children??U),g(u),x(()=>K(u,"-inverted",i())),_(r,u),T()}F(["click"]);export{ue as D,re as M};
